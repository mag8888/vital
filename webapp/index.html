<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vital Shop</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/webapp/static/styles.css?v=monochrome_final_v1">
    <!-- Preload critical images -->
    <link rel="preload" href="https://vital-production-82b0.up.railway.app/products" as="fetch">
</head>

<body>
    <div class="app-container">
        <header class="top-bar">
            <button class="control-btn" onclick="openMenu()" aria-label="Меню">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
            <div class="brand-cluster">
                <div class="brand-badge">
                    <span class="brand-label">Vital</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="control-btn" onclick="openSearch()" aria-label="Поиск">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
                        <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" />
                    </svg>
                </button>
                <button class="control-btn" onclick="openProfile()" aria-label="Профиль">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
                <button class="control-btn" onclick="openCart()" aria-label="Корзина">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path
                            d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 16.1 19 15 19H9C7.9 19 7 18.1 7 17V13M17 13H7"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="cart-badge">0</span>
                </button>
            </div>
        </header>

        <!-- Hero Banner -->
        <div class="hero-banner">
            <div class="hero-content">
                <h1 class="hero-title">VITAL</h1>
                <p class="hero-subtitle">Портал здоровья и молодости</p>
                <div class="hero-decoration"></div>
            </div>
        </div>

        <!-- Main Products Grid -->
        <main class="products-main-container">
            <!-- Products grouped by categories will be inserted here -->
            <div id="products-container">
                <div class="loading" style="padding: 40px 20px; text-align: center;">
                    <div class="loading-spinner"></div>
                    <p>Загрузка товаров...</p>
                </div>
            </div>

            <!-- Plazma API Products Section -->
            <div class="products-scroll-container" id="plazma-products-section" style="display: none;">
                <div class="section-header-inline">
                    <h2 class="section-title-inline">Плазма</h2>
                </div>
                <div id="plazma-products-container" class="products-scroll-wrapper">
                    <div class="products-horizontal">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <p>Загрузка товаров...</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" onclick="showHome()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 9L12 2L21 9V20C21 20.5 20.6 21 20 21H15V14H9V21H4C3.4 21 3 20.5 3 20V9Z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>Домой</span>
            </div>
            <div class="nav-item" onclick="openSection('about')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M9.09 9A3 3 0 0 1 12 7C13.66 7 15 8.34 15 10C15 12 12 12.5 12 14"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M12 17H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>О нас</span>
            </div>
            <div class="nav-item" onclick="openSection('support')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M21 11.5C21 16.19 16.97 20 12 20C10.62 20 9.31 19.71 8.13 19.18L3 21L4.82 16.1C4.29 14.92 4 13.59 4 12.2C4 7.81 8.03 4 13 4H13.5C17.64 4.2 21 7.59 21 11.5Z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>Поддержка</span>
            </div>
            <div class="nav-item" onclick="showFavorites()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M20.84 4.61A5.5 5.5 0 0 0 13.06 4.61L12 5.67L10.94 4.61A5.5 5.5 0 0 0 3.16 12.39L4.22 13.45L12 21.23L19.78 13.45L20.84 12.39A5.5 5.5 0 0 0 20.84 4.61Z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>Избранное</span>
            </div>
            <div class="nav-item" onclick="openSection('partner')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M20 21V19C20 16.79 18.21 15 16 15H8C5.79 15 4 16.79 4 19V21"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>Амбассадоры</span>
            </div>
        </nav>
    </div>

    <!-- Side Menu Drawer -->
    <div id="menu-drawer" class="menu-drawer hidden">
        <div class="menu-drawer-overlay" onclick="closeMenu()"></div>
        <div class="menu-drawer-content">
            <div class="menu-header">
                <h2>Меню</h2>
                <button class="close-btn" onclick="closeMenu()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="menu-list">
                <a href="#" class="menu-item" onclick="event.preventDefault(); closeMenu(); loadProductsOnMainPage();">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="margin-right: 12px; flex: 0 0 auto;">
                        <path d="M3 9L12 2L21 9V20C21 20.5 20.6 21 20 21H15V14H9V21H4C3.4 21 3 20.5 3 20V9Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span>Каталог</span>
                </a>
                <a href="#" class="menu-item"
                    onclick="event.preventDefault(); closeMenu(); openSection('certificates');">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="margin-right: 12px; flex: 0 0 auto;">
                        <path d="M20 12V22H4V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 7H22V12H2V7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 22V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 7C10 7 9 6 9 5C9 3.9 9.9 3 11 3C12 3 12.5 4 12 5C11.5 6 11 7 12 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 7C14 7 15 6 15 5C15 3.9 14.1 3 13 3C12 3 11.5 4 12 5C12.5 6 13 7 12 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Сертификаты</span>
                </a>
                <a href="#" class="menu-item" onclick="event.preventDefault(); closeMenu(); openSection('promotions');">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="margin-right: 12px; flex: 0 0 auto;">
                        <path d="M20.59 13.41L11 3.83V2H2V11H3.83L13.41 20.59C13.79 20.97 14.3 21.18 14.83 21.18C15.36 21.18 15.87 20.97 16.25 20.59L20.59 16.25C20.97 15.87 21.18 15.36 21.18 14.83C21.18 14.3 20.97 13.79 20.59 13.41Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M7 7H7.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span>Акции</span>
                </a>
                <a href="#" class="menu-item" onclick="event.preventDefault(); closeMenu(); openSection('partner');">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="margin-right: 12px; flex: 0 0 auto;">
                        <path d="M20 21V19C20 16.79 18.21 15 16 15H8C5.79 15 4 16.79 4 19V21"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <span>Партнеры</span>
                </a>
                <a href="#" class="menu-item" onclick="event.preventDefault(); closeMenu(); openSection('contacts');">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="margin-right: 12px; flex: 0 0 auto;">
                        <path d="M22 16.92V21A2 2 0 0 1 19.82 23C10.5 22.5 1.5 13.5 1 4.18A2 2 0 0 1 3 2H7.08A2 2 0 0 1 9.06 3.57C9.2 4.61 9.44 5.62 9.78 6.59A2 2 0 0 1 9.33 8.62L7.91 10.04C9.5 12.9 11.1 14.5 13.96 16.09L15.38 14.67A2 2 0 0 1 17.41 14.22C18.38 14.56 19.39 14.8 20.43 14.94A2 2 0 0 1 22 16.92Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Контакты</span>
                </a>
            </div>
            <div class="menu-social">
                <a href="https://vk.com/ivital" target="_blank" class="social-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M15.684 0H8.316C1.592 0 0 1.592 0 8.316v7.368C0 22.408 1.592 24 8.316 24h7.368C22.408 24 24 22.408 24 15.684V8.316C24 1.592 22.408 0 15.684 0zm3.692 17.123h-1.744c-.66 0-.864-.525-2.05-1.727-1.033-1.095-1.49 0-1.49.916v1.564c0 .608-.225.912-.914.912H6.92c-.66 0-.914-.335-.914-1.205V8.716c0-.882.335-1.205 1.014-1.205h2.31c.609 0 .914.412.914.871v4.847c.619-.737 1.45-1.742 2.8-2.816 1.259-1.031 1.93-.701 1.93.65v3.945c0 .637.166.871.61.871h2.21c.609 0 .87-.412.87-1.034v-4.85c0-.701.083-1.243-.573-1.744-.635-.5-1.576-.292-2.24-.122-.411.113-.638.535-.638 1.038v3.79z" />
                    </svg>
                </a>
                <a href="https://t.me/ivitalbot" target="_blank" class="social-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z" />
                    </svg>
                </a>
                <a href="https://www.instagram.com/ivitalnano/" target="_blank" class="social-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                    </svg>
                </a>
            </div>
        </div>
    </div>

    <!-- Search Overlay -->
    <div id="search-overlay" class="search-overlay hidden">
        <div class="search-content">
            <header class="search-header">
                <button class="back-btn" onclick="closeSearch()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
                <h2>Поиск</h2>
                <div class="header-spacer"></div>
            </header>
            <div id="search-body" class="search-body">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Загрузка категорий...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Overlay -->
    <div id="profile-overlay" class="profile-overlay hidden">
        <div class="profile-content">
            <header class="profile-header">
                <button class="back-btn" onclick="closeProfile()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
                <h2>Профиль</h2>
                <div class="header-spacer"></div>
            </header>
            <div id="profile-body" class="profile-body">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Загрузка данных...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Section Content Overlays -->
    <div id="section-overlay" class="section-overlay hidden">
        <div class="section-content">
            <header class="section-header">
                <button class="back-btn" onclick="closeSection()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
                <h2 id="section-title">Раздел</h2>
                <div class="header-spacer"></div>
            </header>
            <div id="section-body" class="section-body">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <script src="/webapp/static/app.js?v=20"></script>
</body>

</html>