# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∞—É–¥–∏—Ç—É –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∞–¥–º–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è escapeAttr
**–§–∞–π–ª:** `vital/src/admin/web.ts:5719-5732`

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ Unicode
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–Ω–∞—á–∞–ª–∞ `&`, –ø–æ—Ç–æ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ null –±–∞–π—Ç–æ–≤ –∏ –Ω–µ–≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ó–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫ –Ω–∞ –ø—Ä–æ–±–µ–ª—ã

### 2. –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ inline onclick –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ —Å–µ–∫—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
**–§–∞–π–ª:** `vital/src/admin/web.ts:5800`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `onclick="editProduct(this)"`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `data-edit-product` –∞—Ç—Ä–∏–±—É—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ event delegation

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è event delegation
**–§–∞–π–ª:** `vital/src/admin/web.ts:6574-6627`

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:**
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ (–Ω–æ–≤–∞—è)

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
**–§–∞–π–ª:** `vital/src/admin/web.ts:5810`

- ‚úÖ –£–±—Ä–∞–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
- ‚úÖ –í—Å–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `escapeAttr`
- ‚úÖ –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
**–§–∞–π–ª:** `vital/src/admin/web.ts:5788-5803`

- ‚úÖ –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `class="edit-btn"`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

## üìä –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞

### Data-–∞—Ç—Ä–∏–±—É—Ç—ã (–≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã):
- ‚úÖ `data-id` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-title` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-summary` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-description` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-instruction` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-instruction-text` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-image` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-product-id` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-instruction-id` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-category-id` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`
- ‚úÖ `data-image-input-id` - —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `escapeAttr`

### Inline JavaScript (—É–¥–∞–ª–µ–Ω):
- ‚úÖ `onclick="editProduct(this)"` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ event delegation
- ‚úÖ `onclick="document.getElementById(...).click()"` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ event delegation
- ‚úÖ `onclick="showInstructionSafe(this)"` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ event delegation

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –§—É–Ω–∫—Ü–∏—è escapeAttr —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
1. HTML —Å—É—â–Ω–æ—Å—Ç–∏ (`&`, `<`, `>`, `"`, `'`)
2. –û–±—Ä–∞—Ç–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ (`` ` ``)
3. –ü–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ (`\n`, `\r`)
4. –¢–∞–±—É–ª—è—Ü–∏—é (`\t`)
5. Null –±–∞–π—Ç—ã (`\x00`)
6. –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã Unicode (`\u0000-\u001F`, `\u007F-\u009F`)

### Event Delegation Pattern:
- –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `addEventListener`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ù–µ—Ç inline JavaScript –≤ HTML
- –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

## üß™ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
**–†–µ—à–µ–Ω–∏–µ:** –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `escapeAttr` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Inline onclick –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ event delegation

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ data-–∞—Ç—Ä–∏–±—É—Ç–∞—Ö
**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `escapeAttr` –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π –≤ HTML

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
**–†–µ—à–µ–Ω–∏–µ:** –£–ø—Ä–æ—â–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –≤—Å–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ –í—Å–µ –¥–ª–∏–Ω–Ω—ã–µ innerHTML —Å—Ç—Ä–æ–∫–∏ —Ä–∞–∑–±–∏—Ç—ã –Ω–∞ —á–∞—Å—Ç–∏
- ‚úÖ –í—Å–µ inline onclick –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª –æ—à–∏–±–æ–∫
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω event delegation –¥–ª—è –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å –≤—Å–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞.










